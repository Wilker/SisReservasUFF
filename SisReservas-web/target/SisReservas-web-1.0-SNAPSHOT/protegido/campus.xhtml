<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui">

    <body>

        <ui:composition template="./../template/template.xhtml">

            <ui:define name="content">
                <style>
                    .ui-datatable.borderless thead th,
                    .ui-datatable.borderless tbody,
                    .ui-datatable.borderless tbody tr,
                    .ui-datatable.borderless tbody td {
                        border-style: none;
                    }
                    .ui-datatable tbody tr,
                    .ui-datatable tbody td{
                        height: 80px;
                    }

                </style>
                <h3 style="text-align: center" >Gerenciar Campi</h3>
                <div class="container">
                    <h:form id="formCadastro" >
                        <p:growl id="mensagem" autoUpdate="false" severity="info, fatal" showDetail="true" />
                        <h:panelGrid id="pgGeral" columns="1" style="margin: 0 auto;">
                            <h:panelGrid columns="1" id="pgCampus"  >
                                <p:column>
                                    <p:outputLabel for="txtNome" value="Nome do Campus" />
                                    <p:inputText id="txtNome" value="#{campusController.campus.nome}" 
                                                 required="true" requiredMessage="O nome do campus é obrigatório!"/>
                                </p:column>

                                <p:message for="txtNome"/>

                                <p:column>
                                    <p:outputLabel for="txtEndereco" value="Endereço" />
                                    <p:inputText id="txtEndereco" value="#{campusController.campus.endereco}" 
                                                 required="true" requiredMessage="O endereço do campus é obrigatório!"/>
                                </p:column>

                                <p:message for="txtEndereco"/>
                                <p:column>
                                    <p:commandButton value="Atualizar" class="btn waves-effect waves-light" style="float:right" actionListener="#{campusController.editar()}" update="pgCampus, mensagem, :formTabela:tabela" rendered="#{campusController.campus.idCampus > 0}" />
                                    <p:commandButton value="Cadastrar" class="btn waves-effect waves-light" style="float:right" actionListener="#{campusController.cadastrar()}" update="pgCampus, mensagem, :formTabela:tabela" rendered="#{campusController.campus.idCampus == null}" />
                                </p:column>
                                <p:column/>
                            </h:panelGrid>
                        </h:panelGrid>


                    </h:form>
                </div>



                <div class="container">
                    <h:form id="formTabela">
                        <p:dataTable  id="tabela" tableStyleClass="striped" styleClass="borderless"  value="#{campusController.campi}" var="campus" >
                            <p:column headerText="Campus" >
                                <h:outputText value="#{campus.nome}" />
                            </p:column>
                            <p:column headerText="Endereço" >
                                <h:outputText value="#{campus.endereco}" />
                            </p:column>
                            <p:column headerText="Ações" >
                                <div style="text-align: center;">
                                    <div style="display: inline-block;">
                                        <h:commandLink title="Ver Prédios">
                                            <i class="material-icons left">business</i>
                                        </h:commandLink>
                                        <h:commandLink title="Editar"  actionListener="#{campusController.exibir(campus)}" style="margin-right: 10px" >
                                            <i class="material-icons left">mode_edit</i>
                                        </h:commandLink>

                                        <h:commandLink title="Excluir" actionListener="#{campusController.excluir(campus)}" >
                                            <i class="material-icons left">delete</i>
                                        </h:commandLink>
                                    </div>
                                </div>


                            </p:column>
                        </p:dataTable>

                    </h:form>
                </div>
                <div class="section">

                </div>


            </ui:define>

        </ui:composition>

    </body>
</html>
